version: '1.0'

steps:
  build_prj:
    type: build
    description: Build an Image With Build Arguments
    image_name: codefreshio/yaml-example-build-arguments
    dockerfile: Dockerfile
    tag: ${{CF_BRANCH}}
    build_arguments:
        - argument=${{TEST}}
    when:
      condition:
        all:
          betaBranch: 'includes(lower("beta"), "beta") == true'
          isTag: 'match("v1.0.0-beta.1", "^v([0-9]\.)([0-9]\.)[0-9](-beta\.[0-9]\{1,3\})?$", true) == true'
#          isTag: 'match("v1.0.0-beta.1", "^v([0-9]\.){2}[0-9](-beta\.[0-9]{1,3})?$", true) == true'